![Production Deployment](https://github.com/ubc-cpsc455-2024S/project-04_trekkers/actions/workflows/deploy-production.yml/badge.svg)
![Tests](https://github.com/ubc-cpsc455-2024S/project-04_trekkers/actions/workflows/run-tests.yml/badge.svg)

<h1 align="center"> Trek </h1> <br>
<p align="center">
  <a href="https://trek.wyfx.ca">
    <img alt="Trek" title="Trek" src="images/Trek-Slogan.png" width="450">
  </a>
</p>

<p align="center">
  A <b>personalized</b>, <b>collaborative</b>, and <b>user-experience-focused</b> trip planning solution developed through the <b>best industry practices</b>.
</p>

<div align="center">

**&searr;&nbsp;&nbsp;Our Official Production Website&nbsp;&nbsp;&swarr;**

[Trek](https://trek.wyfx.ca) <br />
[Trek Admin Panel](https://trek.wyfx.ca/admin)

**&searr;&nbsp;&nbsp;Our Official Documentation Website&nbsp;&nbsp;&swarr;**

[Trekkers](https://ubc-cpsc455-2024s.github.io/trekkers-docs-public/)


![Amazon S3 Badge](https://img.shields.io/badge/Amazon%20S3-569A31?logo=amazons3&logoColor=fff&style=for-the-badge)
![Amazon EC2 Badge](https://img.shields.io/badge/Amazon%20EC2-F90?logo=amazonec2&logoColor=fff&style=for-the-badge)
![Auth0 Badge](https://img.shields.io/badge/Auth0-EB5424?logo=auth0&logoColor=fff&style=for-the-badge)
![AWS](https://img.shields.io/badge/AWS-%23FF9900.svg?style=for-the-badge&logo=amazon-aws&logoColor=white)
![AWS Lambda Badge](https://img.shields.io/badge/AWS%20Lambda-F90?logo=awslambda&logoColor=fff&style=for-the-badge)
![Brevo Badge](https://img.shields.io/badge/Brevo-0B996E?logo=brevo&logoColor=fff&style=for-the-badge)
![Cloudflare](https://img.shields.io/badge/Cloudflare-F38020?style=for-the-badge&logo=Cloudflare&logoColor=white)
![Docusaurus Badge](https://img.shields.io/badge/Docusaurus-3ECC5F?logo=docusaurus&logoColor=fff&style=for-the-badge)
![Express Badge](https://img.shields.io/badge/Express-000?logo=express&logoColor=fff&style=for-the-badge)
![Git Badge](https://img.shields.io/badge/Git-F05032?logo=git&logoColor=fff&style=for-the-badge)
![Mantine Badge](https://img.shields.io/badge/Mantine-339AF0?logo=mantine&logoColor=fff&style=for-the-badge)
![Mapbox Badge](https://img.shields.io/badge/Mapbox-000?logo=mapbox&logoColor=fff&style=for-the-badge)
![MongoDB](https://img.shields.io/badge/MongoDB-%234ea94b.svg?style=for-the-badge&logo=mongodb&logoColor=white)
![Mongoose Badge](https://img.shields.io/badge/Mongoose-800?logo=mongoose&logoColor=fff&style=for-the-badge)
![Nginx](https://img.shields.io/badge/nginx-%23009639.svg?style=for-the-badge&logo=nginx&logoColor=white)
![NodeJS](https://img.shields.io/badge/node.js-6DA55F?style=for-the-badge&logo=node.js&logoColor=white)
![Nodemon](https://img.shields.io/badge/NODEMON-%23323330.svg?style=for-the-badge&logo=nodemon&logoColor=%BBDEAD)
![OpenAI Badge](https://img.shields.io/badge/OpenAI-412991?logo=openai&logoColor=fff&style=for-the-badge)
![OpenStreetMap Badge](https://img.shields.io/badge/OpenStreetMap-7EBC6F?logo=openstreetmap&logoColor=fff&style=for-the-badge)
![Payload CMS Badge](https://img.shields.io/badge/Payload%20CMS-000?logo=payloadcms&logoColor=fff&style=for-the-badge)
![Raspberry Pi](https://img.shields.io/badge/-RaspberryPi-C51A4A?style=for-the-badge&logo=Raspberry-Pi)
![React Badge](https://img.shields.io/badge/React-61DAFB?logo=react&logoColor=000&style=for-the-badge)
![Redux Badge](https://img.shields.io/badge/Redux-764ABC?logo=redux&logoColor=fff&style=for-the-badge)
![Socket.io Badge](https://img.shields.io/badge/Socket.io-010101?logo=socketdotio&logoColor=fff&style=for-the-badge)
![Tailwind CSS Badge](https://img.shields.io/badge/Tailwind%20CSS-06B6D4?logo=tailwindcss&logoColor=fff&style=for-the-badge)
![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white)
</div>


<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
## Table of Contents

- [Table of Contents](#table-of-contents)
- [About This Project](#about-this-project)
- [Task Requirements ✅](#task-requirements-)
  - [Minimal 😌](#minimal-)
  - [Standard 👌](#standard-)
  - [Stretch 🔥](#stretch-)
- [Technology Used 👨‍💻](#technology-used-)
  - [Trek Architecture Diagram](#trek-architecture-diagram)
  - [Unit 1: HTML/CSS/JavaScript](#unit-1-htmlcssjavascript)
  - [Unit 2: React, Redux](#unit-2-react-redux)
  - [Unit 3: NodeJS, Express](#unit-3-nodejs-express)
  - [Unit 4: MongoDB](#unit-4-mongodb)
  - [Unit 5: GitHub Actions, CI/CD](#unit-5-github-actions-cicd)
- [Above and Beyond Functionalities 📈🔥](#above-and-beyond-functionalities-)
  - [Real-Time Collaboration 🛜](#real-time-collaboration-)
  - [Extensive use of AWS 💸](#extensive-use-of-aws-)
  - [In-House Geographical Information System (GIS) Database 🌎](#in-house-geographical-information-system-gis-database-)
  - [Extensive Documentation 📝](#extensive-documentation-)
  - [Legal, Academic, and Terms of Service Compliance 👮‍♀️](#legal-academic-and-terms-of-service-compliance-️)
  - [User Email List Management 📧](#user-email-list-management-)
  - [Admin Panel Interface 👩‍💼](#admin-panel-interface-)
  - [Streaming Responses with Chatbot 🤖](#streaming-responses-with-chatbot-)
  - [Secure and Seamless Authentication with Auth0 🔒](#secure-and-seamless-authentication-with-auth0-)
- [Next Steps 🆙](#next-steps-)
- [Development Team (Group 4) 🧍](#development-team-group-4-)
  - [**Jacob Zhu** :octocat: 📧](#jacob-zhu-octocat-)
  - [**Justin Lieu**  :octocat:  📧](#justin-lieu--octocat--)
  - [**Kevin Xu**  :octocat:  📧](#kevin-xu--octocat--)
  - [**Matthew Kang**  :octocat: 📧](#matthew-kang--octocat-)
  - [**William Xiao** :octocat: 📧](#william-xiao-octocat-)
- [Course Team 🧠](#course-team-)
- [How to Access our Demo ‼️](#how-to-access-our-demo-️)
  - [Course Staff Demo Account Credentials](#course-staff-demo-account-credentials)
  - [Signing into Trek](#signing-into-trek)
  - [Signing into the Trek Admin Panel (Course Staff Only)](#signing-into-the-trek-admin-panel-course-staff-only)
- [Repository Structure](#repository-structure)
  - [Important Directories and Explanation](#important-directories-and-explanation)
- [Images](#images)
- [References](#references)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## About This Project

Have you ever tried to plan a group trip with your friends, but it never left
the group chat? Trek is designed for you, making it easy with
real-time collaboration, interactive maps, and personalized recommendations!
With Trek, you'll easily be able to create and share the perfect trip.


## Task Requirements ✅
Last Updated August 5, 2024

### Minimal 😌
- User profiles & accounts
  - [X] Users can create, view, edit, and delete profiles
    - User profile pages
    - Authentication page (and/or other third-party integrations)
    - User settings page
    - Persistent user data storage in MongoDB
- Trips
  - [X] Users can create, manage, and modify trips
    - Trip creation / editing page
    - Page to view all the trips for a user
    - Store user trip information in Mongo when done
  - [X] Users can delete trips
  - [X] Users can share trip iternaries with others, with different access levels
  - [X] Users can use APIs to fetch destination information
  - [X] Users can display trip details and routes on a map

### Standard 👌
- Users
  - [X] Users can set and update travel preferences in their profiles
  - [X] Users can set and update privacy settings
- Trips
  - [X] Users can interact with a map to modify trip routes and details
- Trip Budgets
  - [X] Users can manage trip budgets (e.g. transportation, housing. etc.)
- Trip Recommendations
  - [X] Collects and stores user data for personalized trip recommendations
  - [X] Analyzes user data using AI to identify patterns and preferences
  - [X] Generates personalized trip recommendations based on analyzed user data
### Stretch 🔥
- Trips
  - [ ] Users can duplicate existing trip itineraries for new trips
  - [ ] Users can set transportation of getting to an item of an itinerary
  - [ ] Users can see weather information of a destination
- Trip Budgets
  - [X] Users get personalized budget alerts and recommendations to stay within a budget
- Trip Recommendations
  - [ ] Users can give feedback on generated recommendations
  - [ ] User feedback can affect future recommendations
  - [ ] Comprehensive documentation is provided to the users about how trip recommendations work
- Chatbot
  - [X] Integrated chatbot gives users help with trip planning tasks and gives suggestions based on user input
  - [X] Chatbot can adapt to user preferences and give personalized responses
  - [X] Chatbot collects user feedback for continuous improvement

## Technology Used 👨‍💻

### Trek Architecture Diagram

<img src="/images/Trek Architecture Diagram.drawio.png">

### Unit 1: HTML/CSS/JavaScript 
![HTML5 Badge](https://img.shields.io/badge/HTML5-E34F26?logo=html5&logoColor=fff&style=for-the-badge) ![CSS3 Badge](https://img.shields.io/badge/CSS3-1572B6?logo=css3&logoColor=fff&style=for-the-badge) ![JavaScript Badge](https://img.shields.io/badge/JavaScript-F7DF1E?logo=javascript&logoColor=000&style=for-the-badge)

HTML, CSS, and JavaScript played a major role in our project, as they are the
founding blocks of the libraries we depend on. HTML and CSS were used for
styling the website, while most of our frontend code and all of our backend code
was written in TypeScript and then compiled to JavaScript.

### Unit 2: React, Redux
![React Badge](https://img.shields.io/badge/React-61DAFB?logo=react&logoColor=000&style=for-the-badge) ![Redux Badge](https://img.shields.io/badge/Redux-764ABC?logo=redux&logoColor=fff&style=for-the-badge)

We used React as our primary frontend development tool in addition with
React-Router for having URL paths to facilitate sharing. Redux was used to store
our UI state across all of our pages, and we used asynchronous thunks to store
our UI's state that needed to persist across pages.

### Unit 3: NodeJS, Express
![Node.js Badge](https://img.shields.io/badge/Node.js-5FA04E?logo=nodedotjs&logoColor=fff&style=for-the-badge) ![Express Badge](https://img.shields.io/badge/Express-000?logo=express&logoColor=fff&style=for-the-badge)

Express with NodeJS was our backend system. We used Express to handle most of
our API calls under /api/v1/..., while also connecting our Express server with
PayloadCMS to manage content (e.g. destinations, admins, images). Lastly, we
used Express with express-ws and socket.io to facilitate WebSocket connections
for our realtime collaborative features.

### Unit 4: MongoDB
![MongoDB Badge](https://img.shields.io/badge/MongoDB-47A248?logo=mongodb&logoColor=fff&style=for-the-badge) ![Mongoose Badge](https://img.shields.io/badge/Mongoose-800?logo=mongoose&logoColor=fff&style=for-the-badge)

MongoDB was used to store all of our data (i.e. trips, users, trip items, etc.).
Our Mongo database was updated using Mongoose and PayloadCMS schemas. We also
used three MongoDB Atlas clusters for our project (Production, Development, QA
testing).

### Unit 5: GitHub Actions, CI/CD
![GitHub Badge](https://img.shields.io/badge/GitHub-181717?logo=github&logoColor=fff&style=for-the-badge) ![GitHub Actions Badge](https://img.shields.io/badge/GitHub%20Actions-2088FF?logo=githubactions&logoColor=fff&style=for-the-badge) 

GitHub Actions was integrated into all of our workflows, with actions
automatically triggered on certain events (PRs, pushes) and deployment. We build
any push to our main project_# (final_project) or project_#-dev
(final_project-dev) branches. Any pushes to a -dev branch gets automatically deployed to our self-hosted dev server (https://trek-dev.wyfx.ca), and pushes to a project branch get automatically deployed to our production EC2 instance at https://trek.wyfx.ca.


## Above and Beyond Functionalities 📈🔥

### Real-Time Collaboration 🛜
We designed an event-driven system to allow users to collaborate on the trip
timeline page with an intuitive drag-and-drop system. The event-driven system is
powered by socket.io. In addition, we integrated the realtime server
Hocuspocus for a collaborate rich text editor on the trip map page, as well as Ably
Realtime for avatar stacks and member locations, creating a collaborative
environment where users feel more connected with their co-trip planners.

### Extensive use of AWS 💸
We integrated AWS into our system far beyond that of the project requirements.
In addition to a unique deployment using Nginx, Docker and EC2, we integrated
multiple S3 buckets to store user vs. admin content and have an independent (microservice) 
AWS Lambda setup with Amazon EventBridge to automatically fetch currency conversion 
rates every 24 hours.

### In-House Geographical Information System (GIS) Database 🌎
<b>In 2024, Information is Power.</b> Instead of relying on external APIs like
Google Maps Platform, we decided to build our own GIS database. This approach 
allows us to store and enrich data for destinations retrieved from open sources 
like OpenStreetMap and Wikipedia. By maintaining control over critical data, we 
enhance our operational feasibility and ensure our application remains robust 
and flexible. Our support admins can add rich, customized content to each destination, 
providing a more comprehensive and valuable experience for our users.

### Extensive Documentation 📝
We have a documentation site at
https://ubc-cpsc455-2024s.github.io/trekkers-docs-public/ where we have
documented every step of our project, including blogposts that discuss our
development, API specifications, and summaries of every Q&A we have had during
design reviews.

### Legal, Academic, and Terms of Service Compliance 👮‍♀️
Trek is fully compliant with all terms of service agreements from the data we
use and also supports user privacy. All of our features that require sending
user data to other sources (e.g. our chatbot's Experience) is documented in our
Terms of Service and can be tailored by the user to suit their privacy
preferences.

### User Email List Management 📧
When a user creates an account, they are added to a mailing list (with the
ability to unsubscribe in the settings) for unique offers and newsletters. We
integrated Brevo's API in addition to connecting our domain name to the emails
to make them more official from Trek.

### Admin Panel Interface 👩‍💼
We integrated an admin panel powered by PayloadCMS, which allows us to browse
and modify any data (e.g. destinations, pictures) in a GUI from our site without
having to log into our MongoDB Atlas instance.

### Streaming Responses with Chatbot 🤖
Our chatbot requires no waiting time from the user as we configured Express,
Nginx, and CloudFlare to support streaming responses. Hence, chatbot responses
feel interactive as users can watch their questions being answered in real-time.

### Secure and Seamless Authentication with Auth0 🔒
We integrated Auth0 into our system to ensure secure and seamless authentication for our users. 
Auth0's robust authentication service allows us to handle user logins, sign-ups, and identity management with ease. 
By leveraging Auth0's extensive security features, including features such as anomaly detection, we ensure that our users'
data remains protected. The integration also allows for social logins, making it convenient for users to 
sign in with their existing email accounts. This seamless integration not only enhances security but also 
improves the overall user experience by simplifying the authentication process across our platform.

## Next Steps 🆙
We have a lot of places we still want to go with Trek and may continue even
after CPSC 455!

We would like to make some UI tweaks to Trek to make it easier to use. We are
also interested in further expanding out our email and sharing system to send
email notifications to users in addition to a regular newsletter schedule.
Finally, we are interested in making recommendations more heavily based on user
data, with the user being able to tweak the responses they get back from the
chatbot.


## Development Team (Group 4) 🧍

<table border="1">
    <caption>Trek Development Team</caption>
    <tbody>
        <tr>
            <td align="center" valign="top" width="14.28%"><img src="images/profile-pic/1.png" height="60" />
            <br />
            <sub><b>Jacob Zhu</b></sub><br />
            <i></i>
            </td>
            <td align="center" valign="top" width="14.28%"><img src="images/profile-pic/2.png" height="60" />
            <br />
            <sub><b>Justin Lieu</b></sub></td>
            <td align="center" valign="top" width="14.28%"><img src="images/profile-pic/3.png" height="60" />
            <br />
            <sub><b>Kevin Xu</b></sub></td></td>
            <td align="center" valign="top" width="14.28%"><img src="images/profile-pic/4.png" height="60" />
            <br />
            <sub><b>Matthew Kang</b></sub></td></td></td>
            <td align="center" valign="top" width="14.28%"><img src="images/profile-pic/5.png" height="60" />
            <br />
            <sub><b>William Xiao</b></sub></td></td></td>
        </tr>
    </tbody>
</table>

### **Jacob Zhu** [:octocat:](https://github.com/JacobZhu-zjc) [📧](mailto:jzhu46@student.ubc.ca)

"Too sleepy for my own good..."

- Led our Mongoose integration
- Signficantly supported bugfixing and documentation efforts
- Completed the AWS S3 integration with the project

### **Justin Lieu**  [:octocat: ](https://github.com/jlieu88) [📧](mailto:jlieu@student.ubc.ca)

"I love drinking coffee"

- Led the chatbot and Auth0 integration
- Significantly supported the frontend design
- Implemented many API endpoints


### **Kevin Xu**  [:octocat: ](https://github.com/lebeanshoe) [📧](mailto:kxu20@student.ubc.ca)

"I love cats and dogs"

- Led the integration of Redux, thunks, and Ably into our design
- Significantly supported documentation efforts including GitHub issues, meeting minutes, and API
  documentation
- Redesigned many frontend components with HTML, CSS, JavaScript styling

### **Matthew Kang**  [:octocat:](https://github.com/kang-matthew) [📧](mailto:matt0410@students.cs.ubc.ca)

"I like software"

- Led the trip timeline collaboration and budgets
- Primary frontend UI designer
- Set up documentation site, initial Google Slides, shared Trekkers Google Drive, AWS account

### **William Xiao** [:octocat:](https://github.com/Mooncey) [📧](mailto:munce@students.cs.ubc.ca)


"operating systems nerd"

- Led the CI/CD systems and GitHub Actions
- Integrated the Hocuspocus collaboration system
- Set up Brevo for mail sending, Express backend


## Course Team 🧠

<a href="https://www.ubc.ca/">
<img src="https://brand3.sites.olt.ubc.ca/files/2018/09/5NarrowLogo_ex_768.png" alt="Coast Capital Savings Logo" align="left" height="60" width="auto" />
</a> 

The project is facilitated and supported by the **CPSC 455** course offered by the Computer Science department of the **University of British Columbia**. The coruse is instructed by 	
**Ian McLean** and **Dr. Firas Moosvi**, and the Teaching Assistants for **Team Trek (Group 4)** are Justin Jiao and Michelle Kim.

## How to Access our Demo ‼️

There are two interfaces that are availble for demo: Trek, and Trek Admin Panel. 

Anyone is able to visit and create their own account (OAuth 2.0 with GDPR and CCPA Compliance) with Trek, or the course staff can use the credentials provided by us.

On the other hand, the Trek Admin Panel is unavailable for open public access. Credentials are provided for the course staff or other authorized users only.

### Course Staff Demo Account Credentials

The course staff is provided with 2 Trek user accounts (1 Gmail, 1 trek.wyfx.ca Email) and additionally 1 Admin Panel user account (a total of 3). To retrieve credentials (username and password) for these accounts, follow the steps below:

1. Visit the [Canvas Project Group Page](https://canvas.ubc.ca/groups/646800).

<img src="/images/demo/1.png">

2. Click on 'Files' on the Side Menu.

<img src="/images/demo/2.png">

3. Click on File <i>Demo Access Credentials.pdf</i> to view all demo account credentials and related information.

4. Use <b>Trek Access Credentials</b> on Page 1 for logging into Trek. There are two credentials provided.

5. Use <b>Trek Admin Panel Access Credentials</b> on Page 2 for logging into the Trek Admin Panel. There is one credential provided.




### Signing into Trek

1. Go to [Trek](https://trek.wyfx.ca) and click *Log In*
2. Register, or Sign-in through Google.
3. If you are a course staff member and do not wish to register for an account, use the <b>Trek Access Credentials</b> mentioned in the [Course Staff Demo Account Credentials](#course-staff-demo-account-credentials) section.
   1. If you are using the Gmail demo account, click 'Continue With Google' to sign in. 
   2. The first time you sign in, you will be registered on the Trek mailing list and recieve a welcome email. To view this email after signing in with the demo Gmail credentials, visit [Gmail](https://mail.google.com), and log in using the same credentials.
   3. If there are MFA or other Gmail's security related issues, please use the trek.wyfx.ca demo credentials.

### Signing into the Trek Admin Panel (Course Staff Only)

1. Carefully read the Important Notes section on page 2 of the <i>Demo Access Credentials.pdf</i> document regarding the Admin Panel.
2. Go to [Trek Admin Panel](https://trek.wyfx.ca/admin).
3. Log-in using the <b>Trek Admin Panel Access Credentials</b> mentioned in the [Course Staff Demo Account Credentials](#course-staff-demo-account-credentials) section.

## Repository Structure

```
.
├── CODE_OF_CONDUCT.md
├── LICENSE
├── README.md
├── frontend         🎨 Frontend directory
│   ├── ...
├── backend          🔙 Backend directory
│   ├── ...
├── lambdas          ƛ Lambdas direcotry
│   ├── ...
└── images
```

### Important Directories and Explanation

`frontend/` is where the front-end code is in.

`backend/` is where the back-end code is in.

`lambdas/` is where additional lambda microservices are in.



## Images

These are our prototype images from the beginning of the course!

<img src="images/455 Project - Mockup for UI 1.png" width="1200px">
<img src="images/455 Project - Mockup for UI 2.png" width="1200px">
<img src="images/455 Project - Mockup for UI 3.png" width="1200px">
